<p-table
  [value]="value"
  [columns]="columns"
  [dataKey]="dataKey"
  [paginator]="paginator"
  [rows]="rows"
  [rowsPerPageOptions]="rowsPerPageOptions"
  [paginatorPosition]="paginatorPosition"
  [showCurrentPageReport]="showCurrentPageReport"
  [currentPageReportTemplate]="currentPageReportTemplate"
  [totalRecords]="totalRecords"
  [sortMode]="sortMode"
  [sortField]="sortField"
  [sortOrder]="$any(sortOrder)"
  [selectionMode]="$any(selectionMode)"
  [selection]="selection"
  [globalFilterFields]="globalFilterFields"
  [size]="$any(size)"
  [showGridlines]="showGridlines"
  [stripedRows]="stripedRows"
  [rowHover]="rowHover"
  [styleClass]="styleClass"
  [tableStyle]="tableStyle"
  [tableStyleClass]="tableStyleClass"
  [scrollable]="scrollable"
  [scrollHeight]="scrollHeight"
  [loading]="loading"
  [loadingIcon]="loadingIcon"
  [lazy]="lazy"
  [resizableColumns]="resizableColumns"
  [reorderableColumns]="reorderableColumns"
  [pt]="pt"
  [ptOptions]="ptOptions"
  [dt]="dt"
  [unstyled]="unstyled"
  (selectionChange)="handleSelectionChange($event)"
  (onRowSelect)="handleRowSelect($event)"
  (onRowUnselect)="handleRowUnselect($event)"
  (onPage)="handlePage($event)"
  (onSort)="handleSort($event)"
  (onFilter)="handleFilter($event)"
  (onLazyLoad)="handleLazyLoad($event)"
>
  <!-- Header Template -->
  <ng-template pTemplate="header" let-columns>
    @if (headerTemplate) {
      <ng-container *ngTemplateOutlet="headerTemplate; context: { $implicit: columns }"></ng-container>
    } @else {
      <tr>
        @for (col of columns; track col.field) {
          <th [pSortableColumn]="col.sortable ? col.field : null" [style.width]="col.width" [class]="col.styleClass">
            {{ col.header }}
            @if (col.sortable) {
              <p-sortIcon [field]="col.field"></p-sortIcon>
            }
          </th>
        }
      </tr>
    }
  </ng-template>

  <!-- Body Template -->
  <ng-template pTemplate="body" let-rowData let-columns="columns">
    @if (bodyTemplate) {
      <ng-container *ngTemplateOutlet="bodyTemplate; context: { $implicit: rowData, columns: columns }"></ng-container>
    } @else {
      <tr>
        @for (col of columns; track col.field) {
          <td [class]="col.styleClass">
            {{ rowData[col.field] }}
          </td>
        }
      </tr>
    }
  </ng-template>

  <!-- Footer Template -->
  @if (footerTemplate) {
    <ng-template pTemplate="footer" let-columns>
      <ng-container *ngTemplateOutlet="footerTemplate; context: { $implicit: columns }"></ng-container>
    </ng-template>
  }

  <!-- Empty Message Template -->
  <ng-template pTemplate="emptymessage" let-columns>
    @if (emptyMessageTemplate) {
      <ng-container *ngTemplateOutlet="emptyMessageTemplate; context: { $implicit: columns }"></ng-container>
    } @else {
      <tr>
        <td [attr.colspan]="columns?.length || 1" class="text-center p-4">
          No records found
        </td>
      </tr>
    }
  </ng-template>
</p-table>

